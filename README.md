# Roam Research API Utilities

This package provides utilities for interacting with the Roam Research graphs via Backends API.

## Setup

1. Install required dependencies:
   ```
   pip install python-dotenv requests
   ```

2. Create a `.env` file in your project directory:
   ```
   ROAM_API_TOKEN=your_api_token_here
   ROAM_GRAPH_NAME=your_graph_name_here
   ```

3. Place `client.py` and `roam_api_utils.py` in your project directory.

## Usage

Import and initialize the `RoamAPI` class:

```python
from roam_api_utils import RoamAPI
from dotenv import load_dotenv
import os

load_dotenv()
roam = RoamAPI(os.getenv('ROAM_GRAPH_NAME'), os.getenv('ROAM_API_TOKEN'))
```

## Features

### Creating a Page

```python
roam.create_page("New Page Title")
```

### Adding a Block

```python
page_uid = roam.get_page_uid("Page Title")
roam.add_block(page_uid, "Block content", order='last')
```

### Getting or Creating a Daily Note

```python
import datetime

today_uid = roam.get_or_create_daily_note()
specific_date_uid = roam.get_or_create_daily_note(datetime.datetime(2024, 7, 4))
```

### Processing Markdown Files

Use `process_markdown.py` to convert a markdown file into a Roam page with nested blocks:

```
python process_markdown.py input_file.md
```

### Importing JSON to Roam

You can import JSON data directly to a Roam page using the `import_json_to_page` method:

```python
json_data = {
    "page_text": "Page Title",
    "page_blocks": [
        {"block_text": "Block 1"},
        {"block_text": "Block 2", "block_children": [
            {"block_text": "Child Block"}
        ]}
    ]
}
roam.import_json_to_page(json_data)
```

To import from a JSON file, use the `import_json_file_to_page` method:

```python
roam.import_json_file_to_page("path/to/your/file.json")
```

You can also use the `parse_json_to_roam.py` script to import JSON files:

```
python parse_json_to_roam.py path/to/your/json_file.json
```

### Searching the Roam Graph

Use `search_roam.py` to search for a page and get results in JSON or Markdown format. You can now specify an output file to save the results.

To print results to stdout:
```
python search_roam.py "Page Title" --format json
python search_roam.py "Page Title" --format markdown
```

To save results to a file:
```
python search_roam.py "Page Title" --format json --output-file output.json
python search_roam.py "Page Title" --format markdown --output-file output.md
```

Options:
- `--format`: Choose between 'json' or 'markdown' output (default: json)
- `--output-file`: Specify a file path to save the output. If not provided, results are printed to stdout.

## Notes

- Using [Roam Research's Roam Backend Client](https://github.com/Roam-Research/backend-sdks)
- Some operations may take time to reflect in the Roam graph.
- Be cautious with delete or move operations, as they can't be easily undone via API.
- Test scripts on non-critical graphs before using on main databases.

For more information, refer to the [Roam Research API documentation](https://github.com/Roam-Research/backend-sdks).

README.md generated by Claude 3.5 Sonnet, last updated 2024-07-04